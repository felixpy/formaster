/**
 * Formotor.js v0.1.0
 * (c) 2018 Felix Yang
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("zepto")):"function"==typeof define&&define.amd?define(["zepto"],e):t.Formotor=e(t.Zepto)}(this,function(h){"use strict";function t(){}h=h&&h.hasOwnProperty("default")?h.default:h;var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function a(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function i(t){return"string"==typeof t}function l(t){return"function"==typeof t}function c(t){return"[object Array]"===Object.prototype.toString.apply(t)}function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(t,e)}var u={postName:"data-post-name",ignore:".fm-ignore",accessible:".fm-accessible",disableMode:!1,middlewares:{trim:{"textarea,[type=text]":function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim()}}}};function n(t){return i(t)?u[t]:h.extend(!0,{},u)}function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;i(t)&&(u[t]=e),h.extend(!0,u,t)}var d={tag:/^(?:input|select|textarea|keygen)/i,check:/^(?:checkbox|radio)$/i,select:/^(?:select)$/i,invalidTags:/^(?:submit|button|image|reset|file)$/i};function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.map(function(){return this.elements?r(this.elements):this}).filter(function(){return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.postName,i=e.ignore,r=e.accessible,o=e.disableMode,a=h(t),u=!d.invalidTags.test(t.type),c=t.name||a.attr(n),l=t.checked||!d.check.test(t.type),s=!a.is(i),f=!!o||!a.is(":disabled:not("+r+")");return u&&c&&l&&f&&s}(this,e)}).map(function(){return function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.postName,i=t.middlewares,r=h(n),o=r.is(":checkbox")||r.is("select[multiple]"),a=r.attr(e)||n.name,u=r.val();return h.each(i,function(t,e){h.each(e,function(t,e){r.is(t)&&l(e)&&(u=c(u)?u.map(function(t){return e.call(n,t)}):e.call(n,u))})}),null==u?null:c(u)?h.map(u,function(t){return{name:a,value:t,multi:o}}):{name:a,value:u,multi:o}}(this,e)}).get()}function f(o){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).postName,u=function(t){var e='[name="'+t+'"],['+n+'="'+t+'"]';return o.find(e).add(o.filter(e))};h.each(a,function(t,e){var n=r[t],i=u(t);l(n)?n.apply(i,[o,e,a]):v(i,e)}),h.each(r,function(t,e){var n,i,r=u(t);l(e)&&(n=a,i=t,!Object.prototype.hasOwnProperty.call(n,i))&&e.apply(r,[o,null,a])})}function v(t,e){t.each(function(){var t=h(this);d.check.test(this.type)?(e=(e=c(e)?e:[e]).map(function(t){return t.toString?t.toString():t}),this.checked=a(e,this.value)):t.val(e)})}var p,g=e({},Object.freeze({getValue:function(t){var n=void 0,i=!1,r=function(t,e){null!=t&&(void 0===n?(n=e?[t]:t,e&&(i=!0)):(i||(n=[n],i=!0),n.push(t)))};return t.each(function(){var t=h(this);if(d.check.test(this.type)){var e=t.is(":checkbox");this.checked&&r(this.value,e)}else r(t.val(),!1)}),n},setValue:v,getValues:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=h.extend(!0,{},u,n),r=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r={},o=[];return h.each(t,function(){var t=this.name,e=this.value,n=this.multi;if(r[t])if(c(r[t])&&a(o,t))r[t].push(e);else{var i=r[t];r[t]=[i],r[t].push(e),o.push(t)}else r[t]=n?[e]:e,n&&o.push(t)}),r}(s(t.is("form")?t:t.find(":input"),i)),o=function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},u=e.postName,c={};return h.each(t,function(t,e){if(l(e)){var n='[name="'+t+'"],['+u+'="'+t+'"]',i=o.find(n).add(o.filter(n)),r=e.apply(i,[o,a]);null!=r&&(c[t]=r)}}),c}(t,e,i,h.extend(!0,{},r));return h.extend(r,o)},setValues:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};f(t,e,n,h.extend(!0,{},u,i))}}));return(p=t).getProtoConfig=n,p.setProtoConfig=o,h.fn.formotor=function(n){return i(n)?function(){var t=g[n],e=[this].concat(r(arguments));return t?t.apply(this,e):this}.apply(this,r(arguments).slice(1)):this},t.JZ=h,t.version="0.1.0",t});
