/**
 * Formotor.js v0.1.0
 * (c) 2018 Felix Yang
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e.Formotor=t(e.jQuery)}(this,function(h){"use strict";function e(){}h=h&&h.hasOwnProperty("default")?h.default:h;var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function a(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function i(e){return"string"==typeof e}function l(e){return"function"==typeof e}function c(e){return"[object Array]"===Object.prototype.toString.apply(e)}function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(e,t)}var u={postName:"data-post-name",ignore:".fm-ignore",accessible:".fm-accessible",disableMode:!1,middlewares:{trim:{"textarea,[type=text]":function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim()}}}};function n(e){return i(e)?u[e]:h.extend(!0,{},u)}function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;i(e)&&(u[e]=t),h.extend(!0,u,e)}var d={tag:/^(?:input|select|textarea|keygen)/i,check:/^(?:checkbox|radio)$/i,select:/^(?:select)$/i,invalidTags:/^(?:submit|button|image|reset|file)$/i};function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e.map(function(){return this.elements?r(this.elements):this}).filter(function(){return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.postName,i=t.ignore,r=t.accessible,o=t.disableMode,a=h(e),u=!d.invalidTags.test(e.type),c=e.name||a.attr(n),l=e.checked||!d.check.test(e.type),s=!a.is(i),f=!!o||!a.is(":disabled:not("+r+")");return u&&c&&l&&f&&s}(this,t)}).map(function(){return function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=e.postName,i=e.middlewares,r=h(n),o=r.is(":checkbox")||r.is("select[multiple]"),a=r.attr(t)||n.name,u=r.val();return h.each(i,function(e,t){h.each(t,function(e,t){r.is(e)&&l(t)&&(u=c(u)?u.map(function(e){return t.call(n,e)}):t.call(n,u))})}),null==u?null:c(u)?h.map(u,function(e){return{name:a,value:e,multi:o}}):{name:a,value:u,multi:o}}(this,t)}).get()}function f(e,t){e.each(function(){var e=h(this);d.check.test(this.type)?(t=(t=c(t)?t:[t]).map(function(e){return e.toString?e.toString():e}),this.checked=a(t,this.value)):e.val(t)})}var v,p=t({},Object.freeze({getValue:function(e){var n=void 0,i=!1,r=function(e,t){null!=e&&(void 0===n?(n=t?[e]:e,t&&(i=!0)):(i||(n=[n],i=!0),n.push(e)))};return e.each(function(){var e=h(this);if(d.check.test(this.type)){var t=e.is(":checkbox");this.checked&&r(this.value,t)}else r(e.val(),!1)}),n},setValue:f,getValues:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=h.extend(!0,{},u,n),r=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r={},o=[];return h.each(e,function(){var e=this.name,t=this.value,n=this.multi;if(r[e])if(c(r[e])&&a(o,e))r[e].push(t);else{var i=r[e];r[e]=[i],r[e].push(t),o.push(e)}else r[e]=n?[t]:t,n&&o.push(e)}),r}(s(e.is("form")?e:e.find(":input"),i)),o=function(o){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},u=t.postName,c={};return h.each(e,function(e,t){if(l(t)){var n='[name="'+e+'"],['+u+'="'+e+'"]',i=o.find(n).add(o.filter(n)),r=t.apply(i,[o,a]);null!=r&&(c[e]=r)}}),c}(e,t,i,h.extend(!0,{},r));return h.extend(r,o)},setValues:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(o){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).postName;h.each(a,function(e,t){var n=u[e],i='[name="'+e+'"],['+c+'="'+e+'"]',r=o.find(i).add(o.filter(i));l(n)?n.apply(r,[o,t,a]):f(r,t)})}(e,t,n,h.extend(!0,{},u,i))}}));return(v=e).getConfig=n,v.setConfig=o,h.fn.formotor=function(n){return i(n)?function(){var e=p[n],t=[this].concat(r(arguments));return e?e.apply(this,t):this}.apply(this,r(arguments).slice(1)):this},e.JZ=h,e.version="0.1.0",e});
