/**
 * Formotor.js v0.1.0
 * (c) 2018 Felix Yang 
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("zepto")):"function"==typeof define&&define.amd?define(["zepto"],e):t.Formotor=e(t.Zepto)}(this,function(h){"use strict";function t(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._init(t)}function u(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function c(t){return"function"==typeof t}function l(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.apply(t)}function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(t,e)}h=h&&h.hasOwnProperty("default")?h.default:h;var r,s={postNameAttr:"data-post-name",ignoreSelector:".fm-ignore",accessibleSelector:".fm-accessible",middlewares:{"textarea,[type=text]":function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim()}}},d={tag:/^(?:input|select|textarea|keygen)/i,check:/^(?:checkbox|radio)$/i,select:/^(?:select)$/i,invalidTags:/^(?:submit|button|image|reset|file)$/i};function f(t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.map(function(){return this.elements?i(this.elements):this}).filter(function(){return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.postName,i=e.ignore,r=e.accessible,o=e.disableMode,a=h(t),u=!d.invalidTags.test(t.type),l=this.name||a.attr(n),c=t.checked||!d.check.test(this.type),s=!a.is(i),f=!o||a.is(":disabled:not("+r+")");return u&&l&&c&&f&&s}(this,e)}).map(function(){return function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.postName,i=t.middlewares,r=h(n),o=r.is(":checkbox")||r.is("select[multiple]"),a=r.attr(e)||n.name,u=r.val();return h.each(i,function(t,e){r.is(t)&&c(e)&&(u=l(u)?u.map(function(t){return e.call(n,t)}):e.call(n,u))}),null==u?null:l(u)?h.map(u,function(t){return{name:a,value:t,multi:o}}):{name:a,value:u,multi:o}}(this,e)}).get()}function e(t){var n=void 0,i=!1,r=function(t,e){null!=t&&(null!=n?(n=e?[t]:t,e&&(i=!0)):(i||(n=[n],i=!0),n.push(t)))};return t.each(function(){var t=h(this);if(d.check.test(this.type)){var e=t.is(":checkbox");this.checked?r(this.value,e):r(t.val(),!1)}}),n}function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=h.extend(!0,{},s,n),r=t.is("form,:input")?t:t.find(":input"),o=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r={},o=[];return h.each(t,function(){var t=this.name,e=this.value,n=this.multi;if(r[t])if(l(r[t])&&u(o,t))r[t].push(e);else{var i=r[t];r[t]=[i],r[t].push(e),o.push(t)}else r[t]=n?[e]:e,n&&o.push(t)}),r}(f(r,e,i)),a=function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},u=e.postName,l={};return h.each(t,function(t,e){if(c(e)){var n='[name="'+t+'"],['+u+'="'+t+'"]',i=o.find(n).add(o.filter(n)),r=e.apply(i,[o,a]);null!=r&&(l[t]=r)}}),l}(r,e,i,h.extend(!0,{},o));return h.extend(o,a)}function v(t,e){t.each(function(){var t=h(this);d.check.test(this.type)?(e=(e=l(e)?e:[e]).map(function(t){return t.toString?t.toString():t}),this.checked=u(e,this.value)):t.val(e)})}function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},u=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).postName;h.each(t,function(t,e){var n=a[t],i='[name="'+t+'"],['+u+'="'+t+'"]',r=o.find(i).add(o.filter(i));c(n)?n.apply(r,[o,e]):v(r,e)})}(t,e,n,h.extend(!0,{},s,i))}function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};h.extend(!0,s,t)}return r={getValue:e,setValue:v,getValues:n,setValues:o,setConfig:a},h.fn.formotor=function(e){if("string"==typeof e){var t=function(){var t=i(arguments);if(t=[this].concat(t),r[e])return r[e].apply(this,t)};if(c(t)){var n=i(arguments).slice(1);return t.apply(this,n)}return t}},t.version="0.1.0",t});
